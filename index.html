<!DOCTYPE html>
<html lang="_(en)">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Steganography</title>
  <link rel="stylesheet" href="https://pyscript.net/releases/2025.11.2/core.css">
  <link rel="stylesheet" href="script.css">
  <script type="module" src="https://pyscript.net/releases/2025.11.2/core.js"></script>
</head>
<body>
<script type="py" src="script.py" config="pyscript.toml" target="log"></script>
<script type="module">
  const target = document.getElementById('log');

  function log(message) {
      console.log("[pyscript] " + message);
      target.append(message + '\n');
  }

  addEventListener('py:progress', ({ detail }) => {
      log(detail);
  });

  addEventListener('py:ready', () => {
      log("Starting PyScript");
  });

  addEventListener('py:done', () => {
      log("Started PyScript");
  });
</script>
<div id="all">
  <h1>Steganography</h1>
  <pre id="log">Loading Python, please wait...
<span>(if it takes too long, please refresh page or press F12 to check browser console)</span>
</pre>
  <div id="content" class="hidden">
    <div id="options">
      <div id="option-task-name-block">
        <label for="option-task-name">Task name:</label>&nbsp;
        <input id="option-task-name" maxlength="40" placeholder="Do not use /:\?*'&lt;&quot;&gt;&amp;|" title="Do not use /:\?*'&lt;&quot;&gt;&amp;|" autocomplete="on">
        &nbsp;
        <span>(used to generate output file names)</span>
      </div>
      <div id="option-preview-size-block">
        Max preview size:&nbsp;
        <label for="option-max-preview-width" hidden>width</label>
        <input id="option-max-preview-width">
        x
        <label for="option-max-preview-height" hidden>height</label>
        <input id="option-max-preview-height">
        px&nbsp;
        <span>(clear the fields to impose no limit)</span>
      </div>
      <div id="option-resize-image-block">
        Resize image to:&nbsp;
        <label for="option-resize-factor" hidden>factor</label>
        <input id="option-resize-factor">
        &nbsp;times or&nbsp;
        <label for="option-resize-width" hidden>width</label>
        <input id="option-resize-width">
        x
        <label for="option-resize-height" hidden>height</label>
        <input id="option-resize-height">
        px&nbsp;
        <span>(only specify one value to constraint proportions)</span>
      </div>
      <div id="option-crop-image-block">
        Crop image to:&nbsp;
        <label for="option-crop-width" hidden>width</label>
        <input id="option-crop-width">
        x
        <label for="option-crop-height" hidden>height</label>
        <input id="option-crop-height">
        px&nbsp;
      </div>
      <div id="option-key-size-block">
        Key image size:&nbsp;
        <label for="option-key-factor" hidden>factor</label>
        <input id="option-key-factor">
        &nbsp;times or&nbsp;
        <label for="option-key-width" hidden>width</label>
        <input id="option-key-width">
        x
        <label for="option-key-height" hidden>height</label>
        <input id="option-key-height">
        px&nbsp;
        <span>(defaults to input image size)</span>
      </div>
      <div id="option-key-rotate-block">
        <label for="option-key-rotate">Random key rotation:</label>
        <input id="option-key-rotate">
      </div>
      <div id="option-lock-size-block">
        Lock image size:&nbsp;
        <label for="option-lock-factor" hidden>factor</label>
        <input id="option-lock-factor">
        &nbsp;times or&nbsp;
        <label for="option-lock-width" hidden>width</label>
        <input id="option-lock-width">
        x
        <label for="option-lock-height" hidden>height</label>
        <input id="option-lock-height">
        px&nbsp;
        <span>(defaults to key size)</span>
      </div>
      <div id="option-key-resize-block">
        <label for="option-key-resize">Resize key to lock:</label>&nbsp;
        <input id="option-key-resize">
      </div>
      <div id="option-dither-block">
        <label for="option-dither">Employ dithering:</label>&nbsp;
        <input id="option-dither">
      </div>
      <div id="option-smooth-block">
        <label for="option-smooth">Smoother background:</label>&nbsp;
        <input id="option-smooth">
      </div>
      <button id="options-reset">Reset options to defaults</button>
    </div>
    <div id="template" class="image-block hidden">
      <h2 class="image-title"></h2>
      <div class="image-upload-block">
        <input class="image-upload" title="Click to upload a file to process" type="file" accept="image/*">
      </div>
      <label class="image-description"></label>
      <div class="image-display-block hidden">
        <a class="image-display-link" title="Click for full screen preview" target="_blank" href="">
          <img class="image-display" alt="preview" src=".">
        </a>
      </div>
      <div class="image-download-block hidden">
        <a class="image-download-link" title="Click to download to your computer" download="" href="">
          <button class="image-download ">Download</button>
          <label class="image-name"></label>
        </a>
      </div>
    </div>
    <div id="uploads"></div>
    <div id="generated"></div>
    <div id="footer">
      <table><tr>
        <td><p>© <a href="https://vk.com/jolaf">Василий Захаров</a> 2025</p></td>
        <td><p id="build">dev</p></td>
      </tr></table>
    </div>
  </div>
</div>
</body>
</html>
